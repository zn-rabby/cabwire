<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Ride Request Test</title>
  </head>
  <body>
    <h1>ğŸš— Ride Request Test</h1>
    <p>Open browser console to see ride request logs.</p>

    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script>
      // Update this to match your backend server's IP and port
      const socket = io('http://10.0.60.114:5005');

      socket.on('connect', () => {
        console.log('âœ… Connected to socket server');

        // Join as a driver (example: use actual driver ID in real app)
        socket.emit('join', 'rider::68404642c059928b97088a3b');
      });

      // Listen for ride requests
      socket.on('ride-requested::', data => {
        console.log('ğŸš– New Ride Request Received:');
        console.log('Ride ID:', data.rideId);
        console.log('User ID:', data.userId);
        console.log('Pickup Location:', data.pickupLocation);
        console.log('Dropoff Location:', data.dropoffLocation);
        console.log('Status:', data.status);
        console.log('Fare:', data.fare);
        console.log('Distance (km):', data.distance);
        console.log('Duration (mins):', data.duration);
      });

      // Listen for ride acceptance events
      socket.on('ride-accepted::', data => {
        console.log('âœ… Ride Accepted!');
        console.log('Ride ID:', data.rideId);
        console.log('Accepted By Driver ID:', data.driverId);
      });

      // Optional: other existing listeners
      socket.on('delivery-updated', data => {
        console.log('ğŸ“¦ Delivery update:', data);
      });

      socket.on('rider-location-updated', data => {
        console.log('ğŸ“ Rider location update:', data);
      });

      socket.on('disconnect', () => {
        console.log('âŒ Disconnected from server');
      });
    </script>
  </body>
</html>
